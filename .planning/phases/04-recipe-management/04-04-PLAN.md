---
phase: 04-recipe-management
plan: 04
type: execute
wave: 4
depends_on:
  - 04-02
files_modified:
  - Frontend/src/Pages/AdminRecipes.jsx
autonomous: false

must_haves:
  truths:
    - "Admin can browse recipes with pagination and search"
    - "Admin can delete a recipe with confirmation from the list"
  artifacts:
    - path: "Frontend/src/Pages/AdminRecipes.jsx"
      provides: "Admin recipe list UI with search, pagination, and delete"
  key_links:
    - from: "Frontend/src/Pages/AdminRecipes.jsx"
      to: "/admin/recipes"
      via: "fetch with Clerk token"
      pattern: "fetch\(.*admin/recipes"
    - from: "Frontend/src/Pages/AdminRecipes.jsx"
      to: "/admin/recipes/{id}"
      via: "DELETE action"
      pattern: "DELETE"
---

<objective>
Replace the placeholder admin recipes page with a searchable list and delete action.

Purpose: Provide administrators a working list view to manage recipes.
Output: AdminRecipes page with list UI, filters, pagination, and delete workflow.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@Frontend/src/Pages/AdminRecipes.jsx
@Frontend/src/Pages/AdminUsers.jsx
@Frontend/src/Entities/api.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement admin recipe list fetching with filters</name>
  <files>Frontend/src/Pages/AdminRecipes.jsx</files>
  <action>
    Replace the placeholder with a stateful list component modeled after AdminUsers.
    - Fetch /admin/recipes with Clerk token and query params (search, limit, offset, active filter)
    - Manage status/loading/error states with retry button
    - Use separate input vs applied filter state and reset pagination on filter apply
  </action>
  <verify>npm --prefix Frontend run lint</verify>
  <done>AdminRecipes shows loading/error states and fetches data with pagination + filters.</done>
</task>

<task type="auto">
  <name>Task 2: Render recipe table with delete action and confirmation</name>
  <files>Frontend/src/Pages/AdminRecipes.jsx</files>
  <action>
    Render a table with columns for name, tags, meal type, status, and last updated.
    Add actions:
    - "Edit" link to `/admin/recipes/{id}/edit`
    - "Delete" button that uses window.confirm, calls DELETE /admin/recipes/{id}, and refreshes the list
    Include an "Add recipe" button linking to `/admin/recipes/new`.
  </action>
  <verify>npm --prefix Frontend run lint</verify>
  <done>Admin can delete a recipe from the list and see list refresh to reflect the change.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Admin recipes list with search, pagination, and delete confirmation</what-built>
  <how-to-verify>
    1. Run the frontend and backend locally.
    2. Visit /admin/recipes as an admin user.
    3. Search for a recipe by name/tag and verify results update.
    4. Click Delete on a recipe, confirm, and verify it disappears or shows inactive status.
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
AdminRecipes list fetches data and delete actions work with confirmation.
</verification>

<success_criteria>
Admin can search and paginate recipes and delete a recipe from the list with confirmation.
</success_criteria>

<output>
After completion, create `.planning/phases/04-recipe-management/04-04-SUMMARY.md`
</output>
