---
phase: 04-recipe-management
plan: 05
type: execute
wave: 5
depends_on:
  - 04-03
  - 04-04
files_modified:
  - Frontend/src/App.jsx
  - Frontend/src/Pages/AdminRecipeEditor.jsx
  - Frontend/src/Pages/AdminRecipes.jsx
autonomous: false

must_haves:
  truths:
    - "Admin can create a new recipe using a form"
    - "Admin can edit an existing recipe and save changes"
    - "Admin can bulk import recipes from a CSV/Parquet file in the UI"
  artifacts:
    - path: "Frontend/src/Pages/AdminRecipeEditor.jsx"
      provides: "Admin recipe create/edit form"
    - path: "Frontend/src/Pages/AdminRecipes.jsx"
      provides: "Bulk import panel and action wiring"
    - path: "Frontend/src/App.jsx"
      provides: "Admin routes for recipe create/edit"
  key_links:
    - from: "Frontend/src/Pages/AdminRecipeEditor.jsx"
      to: "/admin/recipes"
      via: "POST/PATCH fetch with Clerk token"
      pattern: "admin/recipes"
    - from: "Frontend/src/Pages/AdminRecipes.jsx"
      to: "/admin/recipes/import"
      via: "fetch with file bytes"
      pattern: "admin/recipes/import"
---

<objective>
Add the admin recipe create/edit form and bulk import UI.

Purpose: Complete recipe CRUD and bulk import workflows in the admin UI.
Output: Editor page, import panel, and routes for recipe management.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@Frontend/src/App.jsx
@Frontend/src/Pages/AdminRecipes.jsx
@Frontend/src/Pages/AdminUsers.jsx
@Frontend/src/components/ui/input.jsx
@Frontend/src/components/ui/button.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add AdminRecipeEditor page and routes</name>
  <files>Frontend/src/App.jsx, Frontend/src/Pages/AdminRecipeEditor.jsx</files>
  <action>
    Create AdminRecipeEditor.jsx with create/edit modes:
    - Detect mode via route param (recipeId) and fetch GET /admin/recipes/{id} when editing
    - Form fields: title, meal_type, tags (comma), ingredients (newline), instructions (newline), nutrition (calories/protein/carbs/fat)
    - On save: POST /admin/recipes for new, PATCH /admin/recipes/{id} for edit
    - On success: navigate back to /admin/recipes
    Add routes:
    - /admin/recipes/new → AdminRecipeEditor
    - /admin/recipes/:recipeId/edit → AdminRecipeEditor
  </action>
  <verify>npm --prefix Frontend run lint</verify>
  <done>Admin can open create/edit routes and submit recipe forms successfully.</done>
</task>

<task type="auto">
  <name>Task 2: Add bulk import panel to AdminRecipes</name>
  <files>Frontend/src/Pages/AdminRecipes.jsx</files>
  <action>
    Add a bulk import section above the table:
    - File input accepting .csv and .parquet
    - Upload button that reads file bytes and POSTs to /admin/recipes/import
      - Set Content-Type based on file extension
      - Include X-File-Name header for backend format detection
    - Display import status (uploading, success, error) and counts from response
    Refresh the list on successful import.
  </action>
  <verify>npm --prefix Frontend run lint</verify>
  <done>Admin can upload a CSV/Parquet file and see created/updated counts in the UI.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Admin recipe create/edit form and bulk import UI</what-built>
  <how-to-verify>
    1. Visit /admin/recipes/new, create a recipe, and confirm it appears in the list.
    2. Open /admin/recipes/{id}/edit, change fields, save, and confirm updates in the list.
    3. Upload a small CSV file via the bulk import panel and verify the success counts.
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
Admin can create/edit recipes and import CSV/Parquet files from the UI without errors.
</verification>

<success_criteria>
Recipe create/edit flows and bulk import UI function end-to-end using admin endpoints.
</success_criteria>

<output>
After completion, create `.planning/phases/04-recipe-management/04-05-SUMMARY.md`
</output>
