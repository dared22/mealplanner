---
phase: 01-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - Frontend/src/components/admin/AdminLayout.jsx
  - Frontend/src/components/admin/AdminSidebar.jsx
  - Frontend/src/components/admin/AdminHeader.jsx
  - Frontend/src/Pages/Forbidden.jsx
autonomous: true

must_haves:
  truths:
    - "Admin layout renders a left sidebar with four navigation items"
    - "Admin header displays admin name, search bar, and logout button"
    - "Active navigation item is visually highlighted"
    - "403 Forbidden page displays clear access denied message"
  artifacts:
    - path: "Frontend/src/components/admin/AdminLayout.jsx"
      provides: "Admin panel shell with sidebar + header + content area"
      min_lines: 20
    - path: "Frontend/src/components/admin/AdminSidebar.jsx"
      provides: "Left sidebar with Dashboard, User Management, Recipe Database, Activity Logs nav items"
      min_lines: 30
    - path: "Frontend/src/components/admin/AdminHeader.jsx"
      provides: "Header bar with admin name, search input, and logout button"
      min_lines: 25
    - path: "Frontend/src/Pages/Forbidden.jsx"
      provides: "403 error page for non-admin users"
      min_lines: 15
  key_links:
    - from: "Frontend/src/components/admin/AdminLayout.jsx"
      to: "Frontend/src/components/admin/AdminSidebar.jsx"
      via: "import and render"
      pattern: "import.*AdminSidebar"
    - from: "Frontend/src/components/admin/AdminLayout.jsx"
      to: "Frontend/src/components/admin/AdminHeader.jsx"
      via: "import and render"
      pattern: "import.*AdminHeader"
---

<objective>
Create the admin panel layout components: sidebar navigation, header bar, and 403 forbidden page.

Purpose: These are the visual building blocks of the admin panel. The sidebar provides navigation between admin sections, the header shows the admin identity and search, and the 403 page handles unauthorized access. All are pure UI components that can be built independently of the backend admin auth.
Output: AdminLayout.jsx (shell), AdminSidebar.jsx (navigation), AdminHeader.jsx (header bar), Forbidden.jsx (403 page).
</objective>

<execution_context>
@/Users/pasha/.claude/get-shit-done/workflows/execute-plan.md
@/Users/pasha/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@Frontend/src/components/DashboardLayout.jsx
@Frontend/src/components/ui/button.jsx
@Frontend/src/components/ui/input.jsx
@Frontend/src/lib/utils.js
@Frontend/src/App.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AdminSidebar, AdminHeader, and AdminLayout components</name>
  <files>
    Frontend/src/components/admin/AdminSidebar.jsx
    Frontend/src/components/admin/AdminHeader.jsx
    Frontend/src/components/admin/AdminLayout.jsx
  </files>
  <action>
Create a `Frontend/src/components/admin/` directory with three components.

**AdminSidebar.jsx:**
- Default export: `AdminSidebar({ activeSection })` component
- Renders a vertical sidebar (fixed left, full height below header) with:
  - App logo/title "Admin Panel" at the top
  - Four navigation items using `Link` from react-router-dom:
    1. Dashboard - icon: LayoutDashboard from lucide-react - path: `/admin`
    2. User Management - icon: Users from lucide-react - path: `/admin/users`
    3. Recipe Database - icon: BookOpen from lucide-react - path: `/admin/recipes`
    4. Activity Logs - icon: ScrollText from lucide-react - path: `/admin/logs`
  - Each nav item: flex row with icon + label text
  - Active section highlighted with distinct background color and text color using the `activeSection` prop
  - Active detection: compare `activeSection` string ("dashboard", "users", "recipes", "logs") OR use `useLocation()` from react-router-dom to match current path
  - Use `useLocation()` approach (preferred) - derive active state from `location.pathname`:
    - `/admin` exact -> dashboard
    - `/admin/users` starts with -> users
    - `/admin/recipes` starts with -> recipes
    - `/admin/logs` starts with -> logs
- Styling: Use Tailwind classes. Sidebar width: `w-64`. Background: `bg-card` (or `bg-white dark:bg-gray-900`). Border right: `border-r`. Nav items: `px-4 py-3 rounded-lg` with hover states. Active: `bg-primary/10 text-primary font-medium`. Use existing CSS variable conventions from the project (var(--primary), etc.) or Tailwind dark mode classes.

**AdminHeader.jsx:**
- Default export: `AdminHeader({ adminName, onLogout })` component
- Renders a horizontal header bar (sticky top, spans content area to the right of sidebar):
  - Left side: Page title area (can show "Admin Panel" or section name)
  - Center: Search input using the existing `Input` component from `@/components/ui/input` with placeholder "Search users, recipes, logs..." and a Search icon (lucide-react) - this is a visual placeholder for now, no functionality needed
  - Right side: Admin name text display + logout button using the existing `Button` component from `@/components/ui/button` with variant="ghost" and LogOut icon from lucide-react
- Props: `adminName` (string) for display, `onLogout` (function) called when logout clicked
- Styling: Use Tailwind. Height: `h-16`. Background: `bg-background`. Border bottom: `border-b`. Padding: `px-6`. Flex layout with items-center and justify-between.

**AdminLayout.jsx:**
- Default export: `AdminLayout({ children, adminName, onLogout })` component
- Composes AdminSidebar and AdminHeader into the admin panel shell:
  - Full-screen flex container
  - AdminSidebar on the left (fixed width w-64)
  - Right content area: AdminHeader on top + scrollable main content below
  - Main content: `<main>` element wrapping `{children}` with padding `p-6`
- Imports and renders AdminSidebar and AdminHeader
- Passes adminName and onLogout to AdminHeader

Use `cn()` from `@/lib/utils` for conditional class merging where helpful. Follow the existing component patterns: default exports, forwardRef not needed for layout components, functional components.
  </action>
  <verify>
1. Confirm all three files exist: `ls Frontend/src/components/admin/`
2. Check AdminLayout imports both sub-components: grep for "AdminSidebar" and "AdminHeader" in AdminLayout.jsx
3. Check AdminSidebar has all four nav items: grep for "Dashboard", "User Management", "Recipe Database", "Activity Logs" in AdminSidebar.jsx
4. Check AdminHeader has search input and logout: grep for "Search" and "LogOut" in AdminHeader.jsx
5. Run frontend build check: `cd Frontend && npx vite build --mode development 2>&1 | tail -5` (should not show import errors for these files)
  </verify>
  <done>
- AdminSidebar renders 4 navigation items (Dashboard, User Management, Recipe Database, Activity Logs) with active state highlighting based on current route
- AdminHeader renders admin name, search input placeholder, and logout button
- AdminLayout composes sidebar + header + content area
- All components use existing shadcn/ui components and Tailwind styling
  </done>
</task>

<task type="auto">
  <name>Task 2: Create 403 Forbidden page</name>
  <files>Frontend/src/Pages/Forbidden.jsx</files>
  <action>
Create `Frontend/src/Pages/Forbidden.jsx`:

- Default export: `Forbidden()` component
- Displays a centered error page with:
  - ShieldAlert icon from lucide-react (large, muted color)
  - "403 - Access Denied" heading (text-2xl font-bold)
  - "You do not have permission to access the admin panel." description paragraph (text-muted-foreground)
  - "Return to Home" link/button that navigates to `/planner` using react-router-dom's `Link` or `useNavigate`
- Use the existing `Button` component from `@/components/ui/button`
- Layout: Full viewport height centered (min-h-screen flex items-center justify-center) with a card-like container
- Follow the project's existing page component pattern (see Login.jsx, MealPlanner.jsx as reference for page structure)
  </action>
  <verify>
1. File exists: `ls Frontend/src/Pages/Forbidden.jsx`
2. Contains key elements: grep for "403", "Access Denied", "admin panel" in Forbidden.jsx
3. Has navigation back: grep for "planner" or "Return" in Forbidden.jsx
  </verify>
  <done>
- Forbidden page displays 403 error with clear message about admin access
- Page includes a link back to /planner for easy navigation
- Styled consistently with the application using existing components
  </done>
</task>

</tasks>

<verification>
1. All four new files exist in correct locations
2. AdminLayout composes AdminSidebar + AdminHeader + children
3. AdminSidebar has exactly 4 nav items with correct labels and paths
4. AdminHeader has search input and logout button
5. Active navigation highlighting works based on route
6. Forbidden page shows clear 403 message with return link
7. All components use existing shadcn/ui primitives (Button, Input) and Tailwind
</verification>

<success_criteria>
- Admin panel layout structure matches requirements: left sidebar + header + content area
- Sidebar has Dashboard, User Management, Recipe Database, Activity Logs navigation
- Header shows admin name, global search bar, and logout button
- 403 page provides clear feedback and navigation back to app
- Components are reusable and ready to be wired into routing (Plan 03)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
