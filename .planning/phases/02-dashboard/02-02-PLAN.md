---
phase: 02-dashboard
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - Frontend/src/Pages/AdminDashboard.jsx
autonomous: true

must_haves:
  truths:
    - "Admin can view dashboard metrics for users and recipes"
    - "Dashboard metrics include week-over-week growth percentages"
    - "System health status is reported from backend checks"
    - "Metrics refresh on page load via the API"
  artifacts:
    - path: "Frontend/src/Pages/AdminDashboard.jsx"
      provides: "Dashboard metrics UI and fetch logic"
      pattern: "/admin/dashboard/metrics"
  key_links:
    - from: "Frontend/src/Pages/AdminDashboard.jsx"
      to: "/admin/dashboard/metrics"
      via: "fetch with Authorization header"
      pattern: "Authorization"
    - from: "Frontend/src/Pages/AdminDashboard.jsx"
      to: "Clerk session token"
      via: "getToken()"
      pattern: "getToken"
---

<objective>
Replace the placeholder admin dashboard with live metrics cards and a health status strip driven by the backend metrics API.

Purpose: Give administrators immediate visibility into system activity and health.
Output: Metrics UI on the admin dashboard with loading, error, and refreshed states.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-dashboard/02-CONTEXT.md

@Frontend/src/Pages/AdminDashboard.jsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fetch dashboard metrics with Clerk auth</name>
  <files>Frontend/src/Pages/AdminDashboard.jsx</files>
  <action>
In `AdminDashboard.jsx`, replace placeholder content with data fetching from `/admin/dashboard/metrics` using the Clerk session token.

Implementation details:
- Use existing API base URL pattern (`import.meta.env.VITE_API_URL` or existing helper in the file).
- Get token via Clerk (`getToken`) and pass `Authorization: Bearer <token>`.
- State to manage: `metrics`, `loading`, `error`, `lastUpdated`.
- Fetch on initial render and set `lastUpdated` on success.
- On error, show a clear message and allow retry (button or link).

Do not add new dependencies or change routing; keep logic inside this page component.
  </action>
  <verify>
`npm run build` in `Frontend` succeeds.
  </verify>
  <done>
- Metrics are fetched on page load with an auth token.
- Loading and error states are visible and recoverable.
- Last updated time is stored and displayed.
  </done>
</task>

<task type="auto">
  <name>Task 2: Render metrics cards and health strip</name>
  <files>Frontend/src/Pages/AdminDashboard.jsx</files>
  <action>
Render the dashboard UI per Phase 2 decisions:
- Two metric cards (Users, Recipes) with a small icon, label, value, and helper text.
- Growth label: "Last 7 days" with signed whole-number percentage.
- Growth styling: green up/red down with arrow; 0% uses neutral styling.
- Show "N/A" if a metric value is missing.
- Health strip below the cards with a colored pill badge (status text only) and a "last checked" timestamp.

Use existing Tailwind/shadcn styles already in the admin UI. Use whichever icon set is already installed; do not add new dependencies.
  </action>
  <verify>
`npm run build` in `Frontend` succeeds.
  </verify>
  <done>
- Dashboard renders two metric cards and a health strip using live data.
- Growth percentages display with correct sign and styling.
- Health badge and last checked timestamp show when data is available.
  </done>
</task>

</tasks>

<verification>
- Open `/admin` as an admin user and confirm metrics, growth, and health render after load.
- Refresh the page and confirm metrics update timestamp changes.
</verification>

<success_criteria>
- Admin dashboard shows users/recipes metrics, growth indicators, and health status.
- UI handles loading and error states without breaking layout.
- Metrics refresh on page load using the backend API.
</success_criteria>

<output>
After completion, create `.planning/phases/02-dashboard/02-02-SUMMARY.md`
</output>
